"use strict";(self.webpackChunkinterview_prep=self.webpackChunkinterview_prep||[]).push([[6668],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),d=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=d(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(n),h=a,m=c["".concat(l,".").concat(h)]||c[h]||u[h]||i;return n?r.createElement(m,o(o({ref:t},p),{},{components:n})):r.createElement(m,o({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var d=2;d<i;d++)o[d]=n[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8185:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return u}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=["components"],s={title:"Threads (Java)",description:"Some details regarding Java threads",last_modified:new Date("2020-05-30T13:54:15.000Z"),sidebar_label:"Threads"},l=void 0,d={unversionedId:"java/concurrency-details/threads",id:"java/concurrency-details/threads",title:"Threads (Java)",description:"Some details regarding Java threads",source:"@site/docs/java/concurrency-details/threads.md",sourceDirName:"java/concurrency-details",slug:"/java/concurrency-details/threads",permalink:"/interview-prep/java/concurrency-details/threads",draft:!1,tags:[],version:"current",frontMatter:{title:"Threads (Java)",description:"Some details regarding Java threads",last_modified:"2020-05-30T13:54:15.000Z",sidebar_label:"Threads"},sidebar:"docs",previous:{title:"Thread safety",permalink:"/interview-prep/java/concurrency-details/thread-safety"},next:{title:"Event loop",permalink:"/interview-prep/javascript/event-loop"}},p={},u=[{value:"Java threads basics",id:"java-threads-basics",level:2},{value:"Thread interruption",id:"thread-interruption",level:2},{value:"Daemon threads",id:"daemon-threads",level:2},{value:"Resources",id:"resources",level:2}],c={toc:u};function h(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Some details regarding Java threads"),(0,i.kt)("h2",{id:"java-threads-basics"},"Java threads basics"),(0,i.kt)("p",null,"Starting a new thread manually:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:"showLineNumbers",showLineNumbers:!0},"Runnable task = () -> {\n    // ...\n};\n\nThread thread = new Thread(task);\nthread.start();\n")),(0,i.kt)("p",null,"Note: typically, you are better off letting executors manage thread creation for you (see ",(0,i.kt)("a",{parentName:"p",href:"/java/concurrency"},"Concurrency")),(0,i.kt)("p",null,"Making the current thread sleep for a given amount of time:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:"showLineNumbers",showLineNumbers:!0},"Thread.sleep(millis);\n")),(0,i.kt)("p",null,"Blocking the current thread until another thread finishes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"otherThread.join();\n")),(0,i.kt)("p",null,"A thread finishes when its ",(0,i.kt)("inlineCode",{parentName:"p"},"Runnable")," finishes execution, either normally or by throwing an exception. If an exception was thrown, it is passed to the ",(0,i.kt)("em",{parentName:"p"},"uncaught exception handler")," that was set for the thread."),(0,i.kt)("h2",{id:"thread-interruption"},"Thread interruption"),(0,i.kt)("p",null,"In Java, the code running inside a thread is responsible for ensuring that it can be interrupted if needed. Each thread has a flag indicating if it is interrupted. Other threads can set this flag to true by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},"interrupt()")," method."),(0,i.kt)("p",null,"A ",(0,i.kt)("inlineCode",{parentName:"p"},"Runnable")," can check the ",(0,i.kt)("em",{parentName:"p"},"interruption status")," of its thread and then respond accordingly. Typically, this means stopping the computations."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:"showLineNumbers",showLineNumbers:!0},"Runnable task = () -> {\n    while (moreWorkAvailable()) {\n        if (Thread.currentThread().isInterrupted()) {\n            return; // this ends the thread\n        } else {\n            // do some work\n        }\n    }\n}\n")),(0,i.kt)("p",null,"A thread might not be active at the time it is interrupted. If a thread is interrupted while inside a ",(0,i.kt)("inlineCode",{parentName:"p"},"wait()"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"join()")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"sleep()"),", it is immediately reactivated and the interrupted method (for example the ",(0,i.kt)("inlineCode",{parentName:"p"},"wait()"),") throws an ",(0,i.kt)("inlineCode",{parentName:"p"},"InterruptedException"),". This is a checked exception, so you are forced to deal with it if you call ",(0,i.kt)("inlineCode",{parentName:"p"},"wait()"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"join()")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"sleep()"),".  You could just put all of your ",(0,i.kt)("inlineCode",{parentName:"p"},"Runnable"),"'s code inside a try-catch catching ",(0,i.kt)("inlineCode",{parentName:"p"},"InterruptedException")," and doing nothing in response (ending the thread)."),(0,i.kt)("p",null,"If the thread was interrupted before a call to ",(0,i.kt)("inlineCode",{parentName:"p"},"wait()"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"join()")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"sleep()"),", the call immediately throws an ",(0,i.kt)("inlineCode",{parentName:"p"},"InterruptedException"),". This could mean you don't need to check for the interruption status yourself as long as you catch the ",(0,i.kt)("inlineCode",{parentName:"p"},"InterruptedException")," when it is thrown."),(0,i.kt)("p",null,"When you are calling a method throwing ",(0,i.kt)("inlineCode",{parentName:"p"},"InterruptedException")," at a point where you cannot do anything sensible with it, either let it propagate upwards (by declaring the exception on your method) or at least set the current thread's interruption status to true (",(0,i.kt)("inlineCode",{parentName:"p"},"Thread.currentThread().interrupt()"),")."),(0,i.kt)("h2",{id:"daemon-threads"},"Daemon threads"),(0,i.kt)("p",null,"You can mark a thread as a daemon thread, which indicates that the thread is just a helper for other threads and should not prevent the program from exiting. When all non-daemon threads finish, the program exits."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:"showLineNumbers",showLineNumbers:!0},"Thread thread = new Thread(task);\nthread.setDaemon(true);\nthread.start();\n")),(0,i.kt)("h2",{id:"resources"},"Resources"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Core Java SE 9 for the Impatient (book by Cay S. Horstmann)")))}h.isMDXComponent=!0}}]);