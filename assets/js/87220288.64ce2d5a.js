"use strict";(self.webpackChunkinterview_prep=self.webpackChunkinterview_prep||[]).push([[8986],{3905:function(t,e,a){a.d(e,{Zo:function(){return d},kt:function(){return u}});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var m=n.createContext({}),p=function(t){var e=n.useContext(m),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},d=function(t){var e=p(t.components);return n.createElement(m.Provider,{value:e},t.children)},k={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},s=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,m=t.parentName,d=o(t,["components","mdxType","originalType","parentName"]),s=p(a),u=r,f=s["".concat(m,".").concat(u)]||s[u]||k[u]||l;return a?n.createElement(f,i(i({ref:e},d),{},{components:a})):n.createElement(f,i({ref:e},d))}));function u(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=s;var o={};for(var m in e)hasOwnProperty.call(e,m)&&(o[m]=e[m]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}s.displayName="MDXCreateElement"},5928:function(t,e,a){a.r(e),a.d(e,{assets:function(){return d},contentTitle:function(){return m},default:function(){return u},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return k}});var n=a(7462),r=a(3366),l=(a(7294),a(3905)),i=["components"],o={title:"Database normalization",description:"An overview of database normalization for relational databases",last_modified:new Date("2020-05-30T13:54:15.000Z")},m=void 0,p={unversionedId:"data/sql/normalization",id:"data/sql/normalization",title:"Database normalization",description:"An overview of database normalization for relational databases",source:"@site/docs/data/sql/normalization.md",sourceDirName:"data/sql",slug:"/data/sql/normalization",permalink:"/interview-prep/data/sql/normalization",draft:!1,tags:[],version:"current",frontMatter:{title:"Database normalization",description:"An overview of database normalization for relational databases",last_modified:"2020-05-30T13:54:15.000Z"},sidebar:"docs",previous:{title:"ACID properties",permalink:"/interview-prep/data/sql/acid"},next:{title:"Optimistic and pessimistic locking in SQL",permalink:"/interview-prep/data/sql/optimistic-pessimistic-locking-sql"}},d={},k=[{value:"Basic idea",id:"basic-idea",level:2},{value:"Normal forms",id:"normal-forms",level:2},{value:"1NF (first normal form)",id:"1nf-first-normal-form",level:3},{value:"2NF (second normal form)",id:"2nf-second-normal-form",level:3},{value:"3NF (third normal form)",id:"3nf-third-normal-form",level:3},{value:"Resources",id:"resources",level:2}],s={toc:k};function u(t){var e=t.components,a=(0,r.Z)(t,i);return(0,l.kt)("wrapper",(0,n.Z)({},s,a,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"An overview of database normalization for relational databases"),(0,l.kt)("h2",{id:"basic-idea"},"Basic idea"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Database normalization is the process of structuring a relational database in accordance with a series of so-called normal forms in order to reduce data redundancy and improve data integrity.")),(0,l.kt)("p",null,"Basic idea: avoid the existence of redundant data in your database because it is a source of possible inconsistencies. "),(0,l.kt)("p",null,"The way to get rid of this redundant data is generally to introduce new tables."),(0,l.kt)("p",null,"Example: Table with of items with item id, description, manufacturer name and manufacturer country. Storing the manufacturer\u2019s country in every row is a form of redundant data: if we know the manufacturer, we also know the country. And what if we change the manufacturer for a row but forget to change the country? The solution here is to create a separate table for manufacturers, with their country, and refer to that table from the items table."),(0,l.kt)("h2",{id:"normal-forms"},"Normal forms"),(0,l.kt)("p",null,'Normal forms = formally defined "levels of database normalization"'),(0,l.kt)("p",null,"Normal forms from least normalized to most normalized (see below for ones in bold)"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"UNF: ",(0,l.kt)("a",{href:"https://en.wikipedia.org/wiki/Unnormalized_form",target:"_blank",rel:"nofollow noopener noreferrer"},"Unnormalized form ",(0,l.kt)("svg",{class:"embedded-fa-icon"},(0,l.kt)("use",{href:"#external-link-alt"})))," (no normalization applied yet)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"1NF"),": ",(0,l.kt)("a",{href:"https://en.wikipedia.org/wiki/First_normal_form",target:"_blank",rel:"nofollow noopener noreferrer"},"First normal form ",(0,l.kt)("svg",{class:"embedded-fa-icon"},(0,l.kt)("use",{href:"#external-link-alt"})))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"2NF"),": ",(0,l.kt)("a",{href:"https://en.wikipedia.org/wiki/Second_normal_form",target:"_blank",rel:"nofollow noopener noreferrer"},"Second normal form ",(0,l.kt)("svg",{class:"embedded-fa-icon"},(0,l.kt)("use",{href:"#external-link-alt"})))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"3NF"),": ",(0,l.kt)("a",{href:"https://en.wikipedia.org/wiki/Third_normal_form",target:"_blank",rel:"nofollow noopener noreferrer"},"Third normal form ",(0,l.kt)("svg",{class:"embedded-fa-icon"},(0,l.kt)("use",{href:"#external-link-alt"})))),(0,l.kt)("li",{parentName:"ul"},"EKNF: ",(0,l.kt)("a",{href:"https://en.wikipedia.org/wiki/Elementary_key_normal_form",target:"_blank",rel:"nofollow noopener noreferrer"},"Elementary key normal form ",(0,l.kt)("svg",{class:"embedded-fa-icon"},(0,l.kt)("use",{href:"#external-link-alt"})))),(0,l.kt)("li",{parentName:"ul"},"BCNF: ",(0,l.kt)("a",{href:"https://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form",target:"_blank",rel:"nofollow noopener noreferrer"},"Boyce\u2013Codd normal form ",(0,l.kt)("svg",{class:"embedded-fa-icon"},(0,l.kt)("use",{href:"#external-link-alt"})))),(0,l.kt)("li",{parentName:"ul"},"4NF: ",(0,l.kt)("a",{href:"https://en.wikipedia.org/wiki/Fourth_normal_form",target:"_blank",rel:"nofollow noopener noreferrer"},"Fourth normal form ",(0,l.kt)("svg",{class:"embedded-fa-icon"},(0,l.kt)("use",{href:"#external-link-alt"})))),(0,l.kt)("li",{parentName:"ul"},"ETNF: Essential tuple normal form"),(0,l.kt)("li",{parentName:"ul"},"5NF: ",(0,l.kt)("a",{href:"https://en.wikipedia.org/wiki/Fifth_normal_form",target:"_blank",rel:"nofollow noopener noreferrer"},"Fifth normal form ",(0,l.kt)("svg",{class:"embedded-fa-icon"},(0,l.kt)("use",{href:"#external-link-alt"})))),(0,l.kt)("li",{parentName:"ul"},"DKNF: ",(0,l.kt)("a",{href:"https://en.wikipedia.org/wiki/Domain-key_normal_form",target:"_blank",rel:"nofollow noopener noreferrer"},"Domain-key normal form ",(0,l.kt)("svg",{class:"embedded-fa-icon"},(0,l.kt)("use",{href:"#external-link-alt"})))),(0,l.kt)("li",{parentName:"ul"},"6NF: ",(0,l.kt)("a",{href:"https://en.wikipedia.org/wiki/Sixth_normal_form",target:"_blank",rel:"nofollow noopener noreferrer"},"Sixth normal form ",(0,l.kt)("svg",{class:"embedded-fa-icon"},(0,l.kt)("use",{href:"#external-link-alt"}))))),(0,l.kt)("h3",{id:"1nf-first-normal-form"},"1NF (first normal form)"),(0,l.kt)("p",null,"Meaning: values in columns are atomic (each cell has only a single value)"),(0,l.kt)("p",null,"Example: "),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Book table")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Title"),(0,l.kt)("th",{parentName:"tr",align:null},"Subject"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Beginning MySQL Database Design and Optimization"),(0,l.kt)("td",{parentName:"tr",align:null},"MySQL, Database, Design")))),(0,l.kt)("p",null,"Problem: Subject has multiple values in a single cell"),(0,l.kt)("p",null,"Solution: make Subject into its own table"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Book table")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Title"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Beginning MySQL Database Design and Optimization")))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Subject table")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"ID"),(0,l.kt)("th",{parentName:"tr",align:null},"Name"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"MySQL")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"Database")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"3"),(0,l.kt)("td",{parentName:"tr",align:null},"Design")))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Book - Subject table")," (many-to-many relationship, needed because book can have multiple subjects and multiple books can share the same subject)"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Title"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Subject ID"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Beginning MySQL Database Design and Optimization"),(0,l.kt)("td",{parentName:"tr",align:"left"},"1")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Beginning MySQL Database Design and Optimization"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Beginning MySQL Database Design and Optimization"),(0,l.kt)("td",{parentName:"tr",align:"left"},"3")))),(0,l.kt)("h3",{id:"2nf-second-normal-form"},"2NF (second normal form)"),(0,l.kt)("p",null,"Meaning: 1NF + no partial dependencies (values depend on the whole of every ",(0,l.kt)("em",{parentName:"p"},"candidate key"),")"),(0,l.kt)("p",null,"Candidate key: minimal set of columns whose values uniquely identify a single row in the table"),(0,l.kt)("p",null,"Example:"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Book table")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Title"),(0,l.kt)("th",{parentName:"tr",align:null},"Format"),(0,l.kt)("th",{parentName:"tr",align:null},"Author"),(0,l.kt)("th",{parentName:"tr",align:null},"Price"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Beginning MySQL Database Design and Optimization"),(0,l.kt)("td",{parentName:"tr",align:null},"Hardcover"),(0,l.kt)("td",{parentName:"tr",align:null},"Chad Russell"),(0,l.kt)("td",{parentName:"tr",align:null},"49.99")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Beginning MySQL Database Design and Optimization"),(0,l.kt)("td",{parentName:"tr",align:null},"E-book"),(0,l.kt)("td",{parentName:"tr",align:null},"Chad Russell"),(0,l.kt)("td",{parentName:"tr",align:null},"22.34")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"The Relational Model for Database Management: Version 2"),(0,l.kt)("td",{parentName:"tr",align:null},"E-book"),(0,l.kt)("td",{parentName:"tr",align:null},"E.F.Codd"),(0,l.kt)("td",{parentName:"tr",align:null},"13.88")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"The Relational Model for Database Management: Version 2"),(0,l.kt)("td",{parentName:"tr",align:null},"Paperback"),(0,l.kt)("td",{parentName:"tr",align:null},"E.F.Codd"),(0,l.kt)("td",{parentName:"tr",align:null},"22.34")))),(0,l.kt)("p",null,"This table has only one candidate key ({ Title, Format })"),(0,l.kt)("p",null,"Problem: only price depends on the entire candidate key, author does not"),(0,l.kt)("p",null,"Solution: extract formats and prices into different table"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Book table")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Title"),(0,l.kt)("th",{parentName:"tr",align:null},"Author"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Beginning MySQL Database Design and Optimization"),(0,l.kt)("td",{parentName:"tr",align:null},"Chad Russell")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"The Relational Model for Database Management: Version 2"),(0,l.kt)("td",{parentName:"tr",align:null},"E.F.Codd")))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Format - Price table")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Title"),(0,l.kt)("th",{parentName:"tr",align:null},"Format"),(0,l.kt)("th",{parentName:"tr",align:null},"Price"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Beginning MySQL Database Design and Optimization"),(0,l.kt)("td",{parentName:"tr",align:null},"Hardcover"),(0,l.kt)("td",{parentName:"tr",align:null},"49.99")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Beginning MySQL Database Design and Optimization"),(0,l.kt)("td",{parentName:"tr",align:null},"E-book"),(0,l.kt)("td",{parentName:"tr",align:null},"22.34")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"The Relational Model for Database Management: Version 2"),(0,l.kt)("td",{parentName:"tr",align:null},"E-book"),(0,l.kt)("td",{parentName:"tr",align:null},"13.88")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"The Relational Model for Database Management: Version 2"),(0,l.kt)("td",{parentName:"tr",align:null},"Paperback"),(0,l.kt)("td",{parentName:"tr",align:null},"39.99")))),(0,l.kt)("h3",{id:"3nf-third-normal-form"},"3NF (third normal form)"),(0,l.kt)("p",null,"Meaning: 2NF + no transitive dependencies (see example below)"),(0,l.kt)("p",null,'Note: Database is often considered "normalized" if it meets 3NF'),(0,l.kt)("p",null,"Example:"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Book table")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Title"),(0,l.kt)("th",{parentName:"tr",align:null},"Author"),(0,l.kt)("th",{parentName:"tr",align:null},"Genre ID"),(0,l.kt)("th",{parentName:"tr",align:null},"Genre Name"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Beginning MySQL Database Design and Optimization"),(0,l.kt)("td",{parentName:"tr",align:null},"Chad Russell"),(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"Tutorial")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"The Relational Model for Database Management: Version 2"),(0,l.kt)("td",{parentName:"tr",align:null},"E.F.Codd"),(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"Popular science")))),(0,l.kt)("p",null,"Problem: Genre ID and Genre Name both depend on the primary key { Title } but are not independent of each other. Dependency ",(0,l.kt)("em",{parentName:"p"},"Title")," -> ",(0,l.kt)("em",{parentName:"p"},"Genre Name")," can be deduced from ",(0,l.kt)("em",{parentName:"p"},"Title -> Genre ID")," and ",(0,l.kt)("em",{parentName:"p"},"Genre ID -> Genre Name")," (this means we have a transitive dependency)"),(0,l.kt)("p",null,"Solution: separate Genre table"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Book table")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Title"),(0,l.kt)("th",{parentName:"tr",align:null},"Author"),(0,l.kt)("th",{parentName:"tr",align:null},"Genre ID"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Beginning MySQL Database Design and Optimization"),(0,l.kt)("td",{parentName:"tr",align:null},"Chad Russell"),(0,l.kt)("td",{parentName:"tr",align:null},"1")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"The Relational Model for Database Management: Version 2"),(0,l.kt)("td",{parentName:"tr",align:null},"E.F.Codd"),(0,l.kt)("td",{parentName:"tr",align:null},"2")))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Genre table")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Genre ID"),(0,l.kt)("th",{parentName:"tr",align:null},"Genre Name"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"Tutorial")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"Popular science")))),(0,l.kt)("h2",{id:"resources"},"Resources"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{href:"https://en.wikipedia.org/wiki/Database_normalization",target:"_blank",rel:"nofollow noopener noreferrer"},"Database normalization ",(0,l.kt)("svg",{class:"embedded-fa-icon"},(0,l.kt)("use",{href:"#external-link-alt"}))))))}u.isMDXComponent=!0}}]);