<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
<link rel="icon" sizes="32x32" href="/img/favicon-32x32.png">
<link rel="icon" sizes="16x16" href="/img/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<meta name="msapplication-TileColor" content="#000000">
<meta name="theme-color" content="#ffffff">
<script>const style=document.createElement("style");style.type="text/css",style.textContent=".menu .menu__list .menu__list-item.menu__list-item--collapsed .menu__list{height:0;overflow:hidden}.menu .menu__list .menu__link.menu__link--sublist:after{visibility:visible}.menu .menu__list .menu__list-item.menu__list-item--collapsed .menu__link--sublist:after{visibility:visible}",document.getElementsByTagName("head")[0].appendChild(style)</script>

<title data-react-helmet="true">Runtime type checking in TypeScript | interview-prep</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Runtime type checking in TypeScript | interview-prep"><meta data-react-helmet="true" name="description" content="An overview of ways to add runtime type checking to TypeScript applications"><meta data-react-helmet="true" property="og:description" content="An overview of ways to add runtime type checking to TypeScript applications"><meta data-react-helmet="true" property="og:url" content="https://shyamzzp.github.io/interview-prep/javascript/typescript/runtime-type-checking">

<link data-react-helmet="true" rel="shortcut icon" href="/interview-prep/favicon.ico">


<link rel="stylesheet" href="/interview-prep/styles.13a95899.css">


<link rel="preload" href="/interview-prep/styles.a100f0e2.js" as="script">

<link rel="preload" href="/interview-prep/runtime~main.88cff405.js" as="script">

<link rel="preload" href="/interview-prep/main.7d167c39.js" as="script">

<link rel="preload" href="/interview-prep/1.a97003e5.js" as="script">

<link rel="preload" href="/interview-prep/2.2e8d12a1.js" as="script">

<link rel="preload" href="/interview-prep/92.eb9bf858.js" as="script">

<link rel="preload" href="/interview-prep/7ade5073.ab8b1644.js" as="script">

<link rel="preload" href="/interview-prep/17896441.d7ae5b38.js" as="script">

<link rel="preload" href="/interview-prep/fc44ae3e.3c84ab08.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<svg style="display: none;"><desc>Font Awesome Free 5.13.0 by @fontawesome - https://fontawesome.com
            License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)</desc>
            <symbol id="external-link-alt" viewBox="0 0 512 512">
                <path d="M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"></path>
            </symbol>
            <symbol id="github" viewBox="0 0 496 512">
                <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path>
            </symbol></svg>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/interview-prep/"><strong class="navbar__title">Interview Preparation Notes</strong></a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/shyamzzp/interview-prep" class="header-github-link navbar__item navbar__link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/interview-prep/"><strong class="navbar__title">Interview Preparation Notes</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/shyamzzp/interview-prep" class="header-github-link navbar__item navbar__link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/about/about">About these notes</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/about/contributing">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/data/cap-theorem">CAP theorem</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/data/data-schema-migration">Data schema migration</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/data/sql-nosql-newsql">SQL, NoSQL, NewSQL</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">SQL</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/data/sql/acid">ACID properties</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/data/sql/normalization">Database normalization</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/data/sql/optimistic-pessimistic-locking-sql">Optimistic and pessimistic locking in SQL</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/data/sql/transaction-isolation-levels">Transaction isolation levels</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Java</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/concurrency">Concurrency</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/date-time-api">Date and Time API</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/equals">Equals</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/exceptions">Exceptions</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/generics">Generics</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/interfaces">Interfaces</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/java-platform-module-system">Java Platform Module System</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/lambda-expressions">Lambda expressions</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/optional">Optional type</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/overloading-overriding-method-hiding">Overloading, overriding and method hiding</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/streams">Streams</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concurrency details</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/concurrency-details/locking">Locking</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/concurrency-details/thread-safety">Thread safety</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/java/concurrency-details/threads">Threads</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">JavaScript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/javascript/event-loop">Event loop</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/javascript/object-prototypes-classes">Object prototypes and classes</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/javascript/scope-closures">Scope and closures</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/javascript/spread-syntax-rest-parameters-destructuring">Spread syntax, rest parameters and destructuring</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/javascript/this-keyword">The this keyword</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">TypeScript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/javascript/typescript/compiler-api">Compiler API</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/javascript/typescript/conditional-types">Conditional types</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/javascript/typescript/index-types">Index types</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/javascript/typescript/nullable-types-optional-parameters-properties">Nullable types and optional parameters/properties</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/interview-prep/javascript/typescript/runtime-type-checking">Runtime type checking in TypeScript</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/javascript/typescript/type-guards">Type guards</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Mindset</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/mindset/ask-dumb-questions">Ask the dumb questions</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/mindset/concepts-not-code">Concepts, not code</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/mindset/fail-fast">Fail fast</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/mindset/hammock-driven-development">Hammock-driven development</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/mindset/it-depends">It depends</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/mindset/its-about-people">It&#x27;s about people</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/mindset/keep-it-simple">Keep it simple</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/mindset/pragmatism-imperfectionism">Pragmatism and imperfectionism</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/mindset/work-life-balance">Work-life balance</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Preparation (Java)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/algorithms">Algorithms</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/bit-manipulation">Bit Manipulation</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/common-problems">Common Problems</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/comparators">Comparators</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/graph">Graph</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/linked-list">Linked List</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/map">Map</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/math">Math</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/priority-queue">Priority Queue</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/search-algorithms">Search Algorithms</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/snippets">Snippets</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/sorting-algorithms">Sorting Algorithms</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/preparation/tree">Tree</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Processes and techniques</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/branch-by-abstraction-application-strangulation">Branch By Abstraction and application strangulation</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/client-first-design">Client-first design</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/code-review-collaboration">Code review and collaboration workflows</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/dealing-with-uncertainty">Dealing with uncertainty</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/feature-flags">Feature flags</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/issue-troubleshooting">Issue troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/managing-technical-debt">Managing technical debt</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/refactoring">Refactoring</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/small-commits-pull-requests">Small commits and pull requests</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/static-analysis">Static analysis</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/team-decision-making">Team decision-making</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/testing">Testing</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/trunk-based-development">Trunk Based Development</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Testing details</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/testing-details/testing-after-production">Testing after production</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/processes-techniques/testing-details/testing-patterns">Testing patterns</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Soft skills</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/soft-skills/expectation-management">Expectation management</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Web</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/cookies-web-storage">Cookies and Web Storage</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CSS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/css/box-model">Box model</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/css/browser-compatibility">Browser compatibility</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/css/flexbox">Flexbox</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/css/grids">Grids</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/css/inheritance-cascade-specificity">Inheritance, the cascade and specificity</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/css/naming-classes">Naming classes</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/css/positioning">Positioning</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/css/responsive-design">Responsive design</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/css/sass-scss">Sass/SCSS</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/css/selectors">Selectors</a></li><li class="menu__list-item"><a class="menu__link" href="/interview-prep/web/css/units">Units</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Runtime type checking in TypeScript</h1></header><div class="markdown"><p>An overview of ways to add runtime type checking to TypeScript applications</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="why-additional-type-checking"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#why-additional-type-checking" title="Direct link to heading">#</a>Why additional type checking?</h2><p>TypeScript only performs static type checking at compile time! The generated JavaScript, which is what actually runs when you run your code, does not know anything about the types. </p><ul><li>Works fine for type checking within your codebase</li><li>Doesn’t provide any kind of protection against malformed external input</li><li>Isn&#x27;t designed to express typical input validation constraints (minimum array length, string matching a certain pattern) that are about more than simple type safety<ul><li>Several of the methods below provide an easy way to specify these kinds of constraints together with the actual TypeScript types</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="what-about-type-guards"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#what-about-type-guards" title="Direct link to heading">#</a>What about type guards?</h2><p>Type guards are a way to provide information to the TypeScript compiler by having the code check values at runtime.</p><ul><li>Some degree of runtime type checking</li><li>Often, type guards combine information available at runtime with information from type declarations specified in the code. The compiler will make incorrect assumptions if the actual input doesn&#x27;t match those type declarations.</li></ul><p>See also <a href="/javascript/typescript/type-guards">Type guards</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="strictness-of-runtime-checking"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#strictness-of-runtime-checking" title="Direct link to heading">#</a>Strictness of runtime checking</h2><ul><li>Needs to be at least as strict as compile-time checking (otherwise, we lose the guarantees that the compile-time checking provides)</li><li>Can be more strict if desired (require age to be &gt;= 0, require string to match a regex)<ul><li>Note that the TypeScript compiler will not be able to rely on such information</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="runtime-type-checking-strategies"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#runtime-type-checking-strategies" title="Direct link to heading">#</a>Runtime type checking strategies</h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="manual-checks-in-custom-code"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#manual-checks-in-custom-code" title="Direct link to heading">#</a>Manual checks in custom code</h3><ul><li>Flexible</li><li>Can be tedious and error-prone</li><li>Can easily get out of sync with actual code</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="manual-checks-using-a-validation-library"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#manual-checks-using-a-validation-library" title="Direct link to heading">#</a>Manual checks using a validation library</h3><p>Example validation library: <a href="https://joi.dev/" target="_blank" rel="nofollow noopener noreferrer">joi <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token maybe-class-name">Joi</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;joi&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> schema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Joi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Joi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">required</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Joi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">required</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Joi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">number</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">integer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">required</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><ul><li>Flexible</li><li>Easy to write</li><li>Can easily get out of sync with actual code</li></ul><p>Note: there are some very similar libraries than can derive TypeScript types from the runtime type definitions (<a aria-current="page" class="active" href="/interview-prep/javascript/typescript/runtime-type-checking#deriving-static-types-from-runtime-types">see below</a>)</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="manually-creating-json-schemas"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#manually-creating-json-schemas" title="Direct link to heading">#</a>Manually creating JSON Schemas</h3><p>Example JSON Schema:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;$schema&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://json-schema.org/draft-07/schema#&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;required&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;firstName&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;lastName&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;age&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;properties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;firstName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;lastName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;age&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;integer&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;minimum&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><ul><li>Standard format, lots of libraries available for validation ...<ul><li>Example library for validation: <a href="https://www.npmjs.com/package/ajv" target="_blank" rel="nofollow noopener noreferrer">ajv <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a></li></ul></li><li>JSON: easy to store and share</li><li>Can become very verbose and can be tedious to create by hand</li><li>Can easily get out of sync with actual code</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="automatically-generating-json-schemas"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#automatically-generating-json-schemas" title="Direct link to heading">#</a>Automatically generating JSON Schemas</h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="generating-json-schemas-from-typescript-code"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#generating-json-schemas-from-typescript-code" title="Direct link to heading">#</a>Generating JSON Schemas from TypeScript code</h4><p>Most robust library at the moment: <a href="https://www.npmjs.com/package/ts-json-schema-generator" target="_blank" rel="nofollow noopener noreferrer">ts-json-schema-generator <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> (for some alternatives, see <a href="https://github.com/vega/ts-json-schema-generator/issues/101" target="_blank" rel="nofollow noopener noreferrer">this discussion <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a>)</p><p>Example input, including specific constraints that are stricter than TS type checking:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> /** </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@pattern</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> ^[A-Z][a-z]+$  */</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> /**</span></div><div class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">     * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@asType</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> integer</span></div><div class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">     * </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@minimum</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> 0</span></div><div class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>Example output (with default options):</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;$ref&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;#/definitions/Person&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;$schema&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://json-schema.org/draft-07/schema#&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;definitions&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;Person&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;additionalProperties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;properties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;age&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;minimum&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;integer&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;firstName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;pattern&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^[A-Z][a-z]+$&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;lastName&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;required&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;firstName&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;lastName&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;age&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;object&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>Benefits compared to manually creating JSON Schemas:</p><ul><li>Single source of truth</li><li>You can use scripts to make sure generated schemas and code stay in sync</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="generating-json-schemas-from-runtime-types"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#generating-json-schemas-from-runtime-types" title="Direct link to heading">#</a>Generating JSON Schemas from runtime types</h4><p>For some of the runtime type checking libraries mentioned in this note, it&#x27;s possible to automatically generate JSON Schemas based on the defined runtime types. Some examples:</p><ul><li>The <a href="https://joi.dev/" target="_blank" rel="nofollow noopener noreferrer">joi <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> library (see <a aria-current="page" class="active" href="/interview-prep/javascript/typescript/runtime-type-checking#manual-checks-using-a-validation-library">Manual checks using a validation library</a>)<ul><li>Can use <a href="https://www.npmjs.com/package/joi-to-json" target="_blank" rel="nofollow noopener noreferrer">joi-to-json <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a></li></ul></li><li>The <a href="https://www.npmjs.com/package/zod" target="_blank" rel="nofollow noopener noreferrer">zod <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> library (see <a aria-current="page" class="active" href="/interview-prep/javascript/typescript/runtime-type-checking#deriving-static-types-from-runtime-types">Deriving static types from runtime types</a>)<ul><li>Can use <a href="https://www.npmjs.com/package/zod-to-json-schema" target="_blank" rel="nofollow noopener noreferrer">zod-to-json-schema <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a></li><li>Bonus points because it allows deriving static types from runtime types</li></ul></li><li>The <a href="https://www.npmjs.com/package/@sinclair/typebox" target="_blank" rel="nofollow noopener noreferrer">@sinclair/typebox <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> library (see <a aria-current="page" class="active" href="/interview-prep/javascript/typescript/runtime-type-checking#deriving-static-types-from-runtime-types">Deriving static types from runtime types</a>)<ul><li>JSON Schema is immediately generated in the background</li><li>Runtime type checking is implemented through generated JSON Schema</li><li>Bonus points because it allows deriving static types from runtime types</li></ul></li><li>The <a href="https://www.npmjs.com/package/class-validator" target="_blank" rel="nofollow noopener noreferrer">class-validator <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> library (see <a aria-current="page" class="active" href="/interview-prep/javascript/typescript/runtime-type-checking#decorator-based-class-validation">Decorator-based class validation</a>)<ul><li>Can use <a href="https://www.npmjs.com/package/class-validator-jsonschema" target="_blank" rel="nofollow noopener noreferrer">class-validator-jsonschema <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a></li><li>Bonus points because it integrates static and runtime type checking</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="transpilation"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#transpilation" title="Direct link to heading">#</a>Transpilation</h3><p>Example library: <a href="https://www.npmjs.com/package/ts-runtime" target="_blank" rel="nofollow noopener noreferrer">ts-runtime <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a></p><ul><li>Processes code</li><li>Transpiles code into equivalent code with built-in runtime type checking</li></ul><p>Example code:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Person</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Foo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Bar&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">55</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>Example transpiled code</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> t </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ts-runtime/lib&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Person</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">type</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;Person&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;firstName&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;lastName&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;age&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">number</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> test </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">assert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Foo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Bar&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">55</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>Problem: no control over where type checking happens (we only need runtime type checks at the boundaries!)</p><p>Note: Library is still in an experimental stage and not recommended for production use!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="deriving-static-types-from-runtime-types"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#deriving-static-types-from-runtime-types" title="Direct link to heading">#</a>Deriving static types from runtime types</h3><p>Example library: <a href="https://www.npmjs.com/package/yup" target="_blank" rel="nofollow noopener noreferrer">yup <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a></p><ul><li>You define runtime types</li><li>TypeScript infers the corresponding static types from these</li></ul><p>Example runtime type:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> object</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">InferType</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;yup&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> personSchema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">required</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">required</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">number</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">integer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">positive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">required</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>Extracting the corresponding static TypeScript type:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token maybe-class-name">Person</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">InferType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> personSchema</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>Equivalent to:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token maybe-class-name">Person</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>Benefits/drawbacks:</p><ul><li>No possibility for types to get out of sync</li><li>You need to define your types as <code>yup</code> runtime types, not ideal if you want to validate input against a class definition<ul><li>One way to handle this: define a <code>yup</code> type matching the class, create an interface based on the type alias obtained from <code>yup</code> and then make the class implement the interface. This way, TypeScript helps you to keep the <code>yup</code> type in sync with the class, although not all cases are covered (for example, you still need to remember to update the <code>yup</code> type when adding properties to the class).</li><li>Probably, decorator-based class validation is a better approach in this case (<a aria-current="page" class="active" href="/interview-prep/javascript/typescript/runtime-type-checking#decorator-based-class-validation">see below</a>)</li></ul></li><li>Harder to share static types (e.g. between backend and frontend) because they are inferred from <code>yup</code> types</li></ul><p>Some alternative libraries (<a href="https://www.npmtrends.com/@sinclair/typebox-vs-io-ts-vs-ow-vs-runtypes-vs-yup-vs-zod" target="_blank" rel="nofollow noopener noreferrer">compare their popularity <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a>):</p><ul><li>The <a href="https://www.npmjs.com/package/ow" target="_blank" rel="nofollow noopener noreferrer">ow <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> library</li><li>The <a href="https://www.npmjs.com/package/io-ts" target="_blank" rel="nofollow noopener noreferrer">io-ts <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> library<ul><li>Built on <a href="https://www.npmjs.com/package/fp-ts" target="_blank" rel="nofollow noopener noreferrer">fp-ts <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a>, a library for typed functional programming in TypeScript</li><li>Can be confusing if you&#x27;re not familiar with functional programming concepts</li><li>Provides more strict static type checking than standard TypeScript<ul><li>For example, if you define a property <code>age</code> that must be an integer, the inferred TypeScript type will not have <code>age: number</code> but instead it will have <code>age: t.Branded&lt;number, t.IntBrand&gt;</code>. Using a value of that type is straightforward, since you can use it anywhere you can use a <code>number</code>. In order to obtain a value of the type, you must either pass through the runtime type checking (recommended) or bypass TypeScript type checking altogether with something like <code>const age: t.Branded&lt;number, t.IntBrand&gt; = 1 as any</code>  (might make sense for test data and hardcoded values).</li><li>The extra type safety may or may not be worth the extra boilerplate and complexity for your use case</li></ul></li></ul></li><li>The <a href="https://www.npmjs.com/package/zod" target="_blank" rel="nofollow noopener noreferrer">zod <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> library</li><li>The <a href="https://www.npmjs.com/package/runtypes" target="_blank" rel="nofollow noopener noreferrer">runtypes <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> library</li><li>The <a href="https://www.npmjs.com/package/@sinclair/typebox" target="_blank" rel="nofollow noopener noreferrer">@sinclair/typebox <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> library<ul><li>Generates in-memory JSON Schemas in the background</li><li>You need another library (like <a href="https://www.npmjs.com/package/ajv" target="_blank" rel="nofollow noopener noreferrer">ajv <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a>) for the actual validation</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="decorator-based-class-validation"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#decorator-based-class-validation" title="Direct link to heading">#</a>Decorator-based class validation</h3><p>Example library: <a href="https://www.npmjs.com/package/class-validator" target="_blank" rel="nofollow noopener noreferrer">class-validator <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a></p><ul><li>Uses decorators on class properties</li><li>Very similar to Java’s JSR-380 Bean Validation 2.0 (implemented by, for example, Hibernate Validator)<ul><li>Part of a family of Java EE-like libraries that also includes <a href="https://www.npmjs.com/package/typeorm" target="_blank" rel="nofollow noopener noreferrer">typeorm <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> (ORM, similar to Java’s JPA) and <a href="https://www.npmjs.com/package/routing-controllers" target="_blank" rel="nofollow noopener noreferrer">routing-controllers <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> (similar to Java’s JAX-RS for defining APIs)</li></ul></li></ul><p>Example code:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> plainToClass </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;class-transformer&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span></div><div class="token-line" style="color:#393A34"><span class="token plain">    validate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">IsString</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">IsInt</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Min</span><span class="token plain"> </span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;class-validator&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    @</span><span class="token function maybe-class-name" style="color:#d73a49">IsString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    @</span><span class="token function maybe-class-name" style="color:#d73a49">IsString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    lastName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    @</span><span class="token function maybe-class-name" style="color:#d73a49">IsInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    @</span><span class="token function maybe-class-name" style="color:#d73a49">Min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    firstName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Foo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    age</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> inputAsClassInstance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">plainToClass</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Person</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token maybe-class-name">Person</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">validate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputAsClassInstance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">errors</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// handle errors if needed</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>Benefits/drawbacks:</p><ul><li>No possibility for types to get out of sync</li><li>Good for validating against a class definition</li><li>Not ideal if you want to validate input against an interface<ul><li>One way to handle this: define a class implementing the interface and add the decorators there. This way, TypeScript helps you to keep the class in sync with the interface, although not all cases are covered (for example, you still need to remember to update the class type when removing properties from the interface)</li></ul></li></ul><p>Note: class-validator needs actual class instances to work on</p><ul><li>Here, we used its sister library <a href="https://www.npmjs.com/package/class-transformer" target="_blank" rel="nofollow noopener noreferrer">class-transformer <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> to transform our plain input into an actual <code>Person</code> instance<ul><li>The transformation in itself does not perform any kind of type checking!</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="frameworks-integrating-runtime-type-checking"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#frameworks-integrating-runtime-type-checking" title="Direct link to heading">#</a>Frameworks integrating runtime type checking</h3><p>Some example frameworks:</p><ul><li>The <a href="https://nestjs.com/" target="_blank" rel="nofollow noopener noreferrer">NestJS <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> framework<ul><li>Integrates with <a href="https://www.npmjs.com/package/class-validator" target="_blank" rel="nofollow noopener noreferrer">class-validator <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> for runtime type checking (<a href="https://docs.nestjs.com/techniques/validation" target="_blank" rel="nofollow noopener noreferrer">doc <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a>)</li></ul></li><li>The <a href="https://tsoa-community.github.io/docs/" target="_blank" rel="nofollow noopener noreferrer">tsoa <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> framework<ul><li>Automatically generates OpenAPI specs from your code</li><li>Uses JSON Schema under the hood to provide runtime type checking</li></ul></li><li>The <a href="https://typegraphql.com" target="_blank" rel="nofollow noopener noreferrer">type-graphql <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> framework<ul><li>Automatically generates GraphQL SDL from your code</li><li>Integrates with <a href="https://www.npmjs.com/package/class-validator" target="_blank" rel="nofollow noopener noreferrer">class-validator <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> for runtime type checking (<a href="https://typegraphql.com/docs/validation.html" target="_blank" rel="nofollow noopener noreferrer">doc <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a>)</li></ul></li><li>The <a href="https://www.npmjs.com/package/routing-controllers" target="_blank" rel="nofollow noopener noreferrer">routing-controllers <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> framework<ul><li>Integrates with <a href="https://www.npmjs.com/package/class-validator" target="_blank" rel="nofollow noopener noreferrer">class-validator <svg class="embedded-fa-icon"><use href="#external-link-alt"></use></svg></a> for runtime type checking</li></ul></li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/interview-prep/javascript/typescript/nullable-types-optional-parameters-properties"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">« Nullable types and optional parameters/properties (TypeScript)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/interview-prep/javascript/typescript/type-guards"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">Type guards (TypeScript) »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#why-additional-type-checking" class="contents__link">Why additional type checking?</a></li><li><a href="#what-about-type-guards" class="contents__link">What about type guards?</a></li><li><a href="#strictness-of-runtime-checking" class="contents__link">Strictness of runtime checking</a></li><li><a href="#runtime-type-checking-strategies" class="contents__link">Runtime type checking strategies</a><ul><li><a href="#manual-checks-in-custom-code" class="contents__link">Manual checks in custom code</a></li><li><a href="#manual-checks-using-a-validation-library" class="contents__link">Manual checks using a validation library</a></li><li><a href="#manually-creating-json-schemas" class="contents__link">Manually creating JSON Schemas</a></li><li><a href="#automatically-generating-json-schemas" class="contents__link">Automatically generating JSON Schemas</a></li><li><a href="#transpilation" class="contents__link">Transpilation</a></li><li><a href="#deriving-static-types-from-runtime-types" class="contents__link">Deriving static types from runtime types</a></li><li><a href="#decorator-based-class-validation" class="contents__link">Decorator-based class validation</a></li><li><a href="#frameworks-integrating-runtime-type-checking" class="contents__link">Frameworks integrating runtime type checking</a></li></ul></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>copyright © 2022 shyamzzp.</div></div></div></footer>
</div>

<script src="/interview-prep/styles.a100f0e2.js"></script>

<script src="/interview-prep/runtime~main.88cff405.js"></script>

<script src="/interview-prep/main.7d167c39.js"></script>

<script src="/interview-prep/1.a97003e5.js"></script>

<script src="/interview-prep/2.2e8d12a1.js"></script>

<script src="/interview-prep/92.eb9bf858.js"></script>

<script src="/interview-prep/7ade5073.ab8b1644.js"></script>

<script src="/interview-prep/17896441.d7ae5b38.js"></script>

<script src="/interview-prep/fc44ae3e.3c84ab08.js"></script>

<script>window.goatcounter={no_events:!0},window.addEventListener("click",t=>{if(!window.goatcounter.count)return;if(!t.target)return;const e=t.target.getAttribute("href");!e||e.startsWith("http")||e.startsWith("#")||setTimeout(()=>{window.goatcounter.count()})})</script>
<script data-goatcounter="https://interview-prep.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>